(function(e){function n(n){for(var c,u,o=n[0],i=n[1],h=n[2],d=0,s=[];d<o.length;d++)u=o[d],r[u]&&s.push(r[u][0]),r[u]=0;for(c in i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);f&&f(n);while(s.length)s.shift()();return a.push.apply(a,h||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],c=!0,u=1;u<t.length;u++){var o=t[u];0!==r[o]&&(c=!1)}c&&(a.splice(n--,1),e=i(i.s=t[0]))}return e}var c={},u={app:0},r={app:0},a=[];function o(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0be48818":"200ab49e","chunk-0ec82eac":"ee71579f","chunk-0b42d7e1":"49feccf7","chunk-ecd62e7e":"6ad3d183","chunk-17727ef2":"b9972803","chunk-63656326":"202960b7","chunk-641b5dc0":"f5ab3aa5","chunk-1a3286e6":"3d927fe7","chunk-1eb5031e":"0a2c8ba4","chunk-2d0b66fc":"1e9a3583","chunk-2d0b8ed2":"12a0e442","chunk-2d0bac1e":"85c00280","chunk-2d0cfee1":"973e3091","chunk-2d0c76d2":"918d478a","chunk-2d0de194":"cfdaac1c","chunk-2d20888b":"b54b4783","chunk-2d213022":"beedec30","chunk-395140c1":"edcdfd09","chunk-3e7b966b":"71db037e","chunk-54ee4ca2":"75c99bc4","chunk-5da9ee8e":"e3b819c0","chunk-6181285e":"ebd39f16","chunk-1660d288":"95e2635c","chunk-390e59c0":"41386645","chunk-6914eb03":"feac5d3a","chunk-743b7666":"0d744c58","chunk-7459538d":"71816526","chunk-745c7cae":"c05db34f","chunk-74614b5b":"372af53e","chunk-74ae8f6a":"5613b7d5","chunk-77052e38":"004600ab","chunk-90104c00":"5d227bec","chunk-9d822a0c":"df828686","chunk-a4a3973c":"27a6faa8","chunk-b37162a0":"d2d74c0d","chunk-0e1c097a":"20d13bf2","chunk-1a3f7cda":"58b8e0ed","chunk-2d0c0a51":"51a557a1","chunk-be972512":"79e50cbe"}[e]+".js"}function i(n){if(c[n])return c[n].exports;var t=c[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t={"chunk-0b42d7e1":1,"chunk-ecd62e7e":1,"chunk-17727ef2":1,"chunk-63656326":1,"chunk-641b5dc0":1,"chunk-395140c1":1,"chunk-3e7b966b":1,"chunk-6181285e":1,"chunk-1660d288":1,"chunk-390e59c0":1,"chunk-743b7666":1,"chunk-745c7cae":1,"chunk-74614b5b":1,"chunk-74ae8f6a":1,"chunk-77052e38":1,"chunk-a4a3973c":1,"chunk-b37162a0":1,"chunk-1a3f7cda":1};u[e]?n.push(u[e]):0!==u[e]&&t[e]&&n.push(u[e]=new Promise(function(n,t){for(var c="css/"+({}[e]||e)+"."+{"chunk-0be48818":"31d6cfe0","chunk-0ec82eac":"31d6cfe0","chunk-0b42d7e1":"b7fcf66e","chunk-ecd62e7e":"50fae1cd","chunk-17727ef2":"2bb592b9","chunk-63656326":"ef75aaea","chunk-641b5dc0":"8a262021","chunk-1a3286e6":"31d6cfe0","chunk-1eb5031e":"31d6cfe0","chunk-2d0b66fc":"31d6cfe0","chunk-2d0b8ed2":"31d6cfe0","chunk-2d0bac1e":"31d6cfe0","chunk-2d0cfee1":"31d6cfe0","chunk-2d0c76d2":"31d6cfe0","chunk-2d0de194":"31d6cfe0","chunk-2d20888b":"31d6cfe0","chunk-2d213022":"31d6cfe0","chunk-395140c1":"51106675","chunk-3e7b966b":"0fc322c6","chunk-54ee4ca2":"31d6cfe0","chunk-5da9ee8e":"31d6cfe0","chunk-6181285e":"1f337190","chunk-1660d288":"c817b009","chunk-390e59c0":"26247af9","chunk-6914eb03":"31d6cfe0","chunk-743b7666":"d11f382a","chunk-7459538d":"31d6cfe0","chunk-745c7cae":"74a14c90","chunk-74614b5b":"9cfa7bbf","chunk-74ae8f6a":"8a757925","chunk-77052e38":"722bdf1d","chunk-90104c00":"31d6cfe0","chunk-9d822a0c":"31d6cfe0","chunk-a4a3973c":"b2bbb747","chunk-b37162a0":"1f337190","chunk-0e1c097a":"31d6cfe0","chunk-1a3f7cda":"c81b1be1","chunk-2d0c0a51":"31d6cfe0","chunk-be972512":"31d6cfe0"}[e]+".css",r=i.p+c,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var h=a[o],d=h.getAttribute("data-href")||h.getAttribute("href");if("stylesheet"===h.rel&&(d===c||d===r))return n()}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){h=s[o],d=h.getAttribute("data-href");if(d===c||d===r)return n()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=n,f.onerror=function(n){var c=n&&n.target&&n.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+c+")");a.request=c,delete u[e],f.parentNode.removeChild(f),t(a)},f.href=r;var l=document.getElementsByTagName("head")[0];l.appendChild(f)}).then(function(){u[e]=0}));var c=r[e];if(0!==c)if(c)n.push(c[2]);else{var a=new Promise(function(n,t){c=r[e]=[n,t]});n.push(c[2]=a);var h,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=o(e),h=function(n){d.onerror=d.onload=null,clearTimeout(s);var t=r[e];if(0!==t){if(t){var c=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.src,a=new Error("Loading chunk "+e+" failed.\n("+c+": "+u+")");a.type=c,a.request=u,t[1](a)}r[e]=void 0}};var s=setTimeout(function(){h({type:"timeout",target:d})},12e4);d.onerror=d.onload=h,document.head.appendChild(d)}return Promise.all(n)},i.m=e,i.c=c,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var c in e)i.d(t,c,function(n){return e[n]}.bind(null,c));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/",i.oe=function(e){throw console.error(e),e};var h=window["webpackJsonp"]=window["webpackJsonp"]||[],d=h.push.bind(h);h.push=n,h=h.slice();for(var s=0;s<h.length;s++)n(h[s]);var f=d;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);var c={};t.r(c),t.d(c,"attemptLogin",function(){return H}),t.d(c,"attemptRegister",function(){return I}),t.d(c,"logout",function(){return Q}),t.d(c,"setUser",function(){return Z}),t.d(c,"setToken",function(){return F}),t.d(c,"checkUserToken",function(){return J}),t.d(c,"loadUser",function(){return W});var u={};t.r(u),t.d(u,"isLogged",function(){return z}),t.d(u,"authToken",function(){return G}),t.d(u,"currentUser",function(){return X});var r={};t.r(r),t.d(r,"toggle",function(){return ae});var a={};t.r(a),t.d(a,"isToggled",function(){return oe});var o={};t.r(o),t.d(o,"toggle",function(){return ie});t("5c07"),t("53da"),t("2556"),t("d0f8");var i=t("d232"),h=t("54fe"),d=(t("df1c"),t("147b"),t("6e6d")),s=t("3e9c"),f=t("a59e"),l=t.n(f),b=t("a60a"),k=t.n(b);window._=Promise.resolve().then(t.t.bind(null,"c1f9",7)),window.Popper=t.e("chunk-2d0cfee1").then(t.bind(null,"668c")).default;try{window.$=window.jQuery=k.a,Promise.all([t.e("chunk-2d0cfee1"),t.e("chunk-2d0c76d2")]).then(t.t.bind(null,"5122",7)),t.e("chunk-74614b5b").then(t.t.bind(null,"1d83",7)),t.e("chunk-745c7cae").then(t.t.bind(null,"29d8",7)),t.e("chunk-77052e38").then(t.t.bind(null,"ac2a",7)),t.e("chunk-74ae8f6a").then(t.t.bind(null,"8579",7)),t.e("chunk-743b7666").then(t.t.bind(null,"0014",7)),"function"!==typeof l.a.prototype["finally"]&&(l.a.prototype["finally"]=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})})}catch(Ae){throw Ae}var p,m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("router-view")},g=[],v=t("17cc"),w={},y=Object(v["a"])(w,m,g,!1,null,null,null),j=y.exports,O=t("c41d"),P=[{path:"auth/login",name:"auth.login",component:function(){return t.e("chunk-90104c00").then(t.bind(null,"487a"))}},{path:"auth/register",name:"auth.register",component:function(){return Promise.all([t.e("chunk-0ec82eac"),t.e("chunk-1a3286e6")]).then(t.bind(null,"bd49"))}},{path:"auth/oauth-redirect/:platform",name:"auth.oauth_redirect",meta:{navbar:!1,container:!1},component:function(){return t.e("chunk-1eb5031e").then(t.bind(null,"ea9d"))}},{path:"auth/oauth-callback/:platform",name:"auth.oauth_callback",meta:{navbar:!1,container:!1},component:function(){return t.e("chunk-1eb5031e").then(t.bind(null,"ea9d"))}},{path:"/user/forget-password",name:"auth.forget-password",component:function(){return t.e("chunk-2d0bac1e").then(t.bind(null,"3924"))}},{path:"/user/reset-password",name:"auth.reset-password",component:function(){return t.e("chunk-7459538d").then(t.bind(null,"22ded"))}}],T={user:{},token:null},A=t("44f7"),E="Auth//SET_TOKEN",_="Auth//SET_USER",U=(p={},Object(A["a"])(p,E,function(e,n){e.token=n}),Object(A["a"])(p,_,function(e,n){e.user=n}),p),q="APP_USER_TOKEN",x=t("123e"),S=t.n(x),M=function(e){e.subscribe(function(e,n){var t=n.Auth;E===e.type&&(Object(i["b"])(t.token),S.a.setItem(q,t.token))})},N=function(e){M(e)},C=t("fed1"),L=t.n(C),$=function(e){var n=e.username,t=e.password;return i["a"].post("/oauth/token",L.a.stringify({grant_type:"password",client_id:"4",client_secret:"bZPGHdw4TblKcbAQ1QU3dW4fFHZkXtH4A5c0kLZW",username:n,password:t,scope:""}))},B=function(e){return i["a"].post("/auth/register",e)},K=function(){return i["a"].get("/me").catch(function(){})},R=t("c1f9"),H=function(e,n){var t=e.dispatch;return $(n).then(function(e){return t("setToken",e.access_token),l.a.resolve()}).then(function(){return t("loadUser")})},I=function(e,n){var t=e.dispatch;return B(n).then(function(e){var n=e.token;return t("setToken",n),l.a.resolve()}).then(function(){return t("loadUser")})},Q=function(e){var n=e.dispatch;return S.a.removeItem(q).then(n("setToken",null)).then(n("setUser",{}))},Z=function(e,n){var t=e.commit;t(_,n),l.a.resolve(n)},F=function(e,n){var t=e.commit,c=Object(R["isEmpty"])(n)?null:n.token||n;return t(E,c),l.a.resolve(c)},J=function(e){var n=e.dispatch,t=e.state;return Object(R["isEmpty"])(t.token)?S.a.getItem(q).then(function(e){return Object(R["isEmpty"])(e)?l.a.reject("NO_TOKEN"):n("setToken",e)}).then(function(){return n("loadUser")}):l.a.resolve(t.token)},W=function(e){var n=e.dispatch;return K().then(function(e){return n("setUser",e)}).catch(Q)},z=function(e){var n=e.token;return!Object(R["isEmpty"])(n)},G=function(e){var n=e.token;return n},X=function(e){var n=e.user;return n},D={module:{state:T,mutations:U,actions:c,getters:u},plugin:N},V=[{path:"/",name:"home",component:function(){return Promise.all([t.e("chunk-b37162a0"),t.e("chunk-1a3f7cda")]).then(t.bind(null,"e360"))}}],Y=[{path:"/nodes",name:"nodes.show",component:function(){return t.e("chunk-2d20888b").then(t.bind(null,"a4ce"))}},{path:"/nodes/:id",name:"nodes.node",component:function(){return Promise.all([t.e("chunk-b37162a0"),t.e("chunk-0e1c097a")]).then(t.bind(null,"19a1"))},meta:{container:!1}}],ee=[{path:"notifications",name:"notifications.show",component:function(){return t.e("chunk-395140c1").then(t.bind(null,"8a9c"))},meta:{requiresAuth:!0}}],ne=[{path:"pages/privacy",name:"pages.privacy",component:function(){return t.e("chunk-2d0b66fc").then(t.bind(null,"1cc7"))}},{path:"pages/404",name:"pages.not-found",component:function(){return t.e("chunk-6914eb03").then(t.bind(null,"1ce3"))}}],te=[{path:"threads/create",name:"threads.create",component:function(){return Promise.all([t.e("chunk-0ec82eac"),t.e("chunk-17727ef2"),t.e("chunk-641b5dc0")]).then(t.bind(null,"8b73"))}},{path:"threads/:id/edit",name:"threads.edit",component:function(){return Promise.all([t.e("chunk-0ec82eac"),t.e("chunk-17727ef2"),t.e("chunk-641b5dc0")]).then(t.bind(null,"8b73"))}},{path:"threads/:id",name:"threads.show",component:function(){return Promise.all([t.e("chunk-0ec82eac"),t.e("chunk-17727ef2"),t.e("chunk-0b42d7e1"),t.e("chunk-63656326")]).then(t.bind(null,"5fd3"))}}],ce=[{path:"/:username",component:function(){return Promise.all([t.e("chunk-0ec82eac"),t.e("chunk-0b42d7e1"),t.e("chunk-ecd62e7e")]).then(t.bind(null,"d7b0"))},children:[{path:"/",name:"users.show",meta:{container:!1},component:function(){return t.e("chunk-be972512").then(t.bind(null,"1201"))}},{path:"threads",name:"users.threads",meta:{container:!1},component:function(){return Promise.all([t.e("chunk-b37162a0"),t.e("chunk-2d0c0a51")]).then(t.bind(null,"4351"))}},{path:"followers",name:"users.followers",meta:{container:!1},component:function(){return Promise.all([t.e("chunk-6181285e"),t.e("chunk-1660d288")]).then(t.bind(null,"8f0b"))}},{path:"following",name:"users.following",meta:{container:!1},component:function(){return Promise.all([t.e("chunk-6181285e"),t.e("chunk-390e59c0")]).then(t.bind(null,"0320"))}}]},{path:"/user",component:function(){return t.e("chunk-a4a3973c").then(t.bind(null,"7abc"))},children:[{path:"profile",name:"user.profile",meta:{requiresAuth:!0},component:function(){return t.e("chunk-0be48818").then(t.bind(null,"4b0c"))}},{path:"account",name:"user.account",meta:{requiresAuth:!0},component:function(){return t.e("chunk-54ee4ca2").then(t.bind(null,"fee0"))}},{path:"extends",name:"user.extends",meta:{requiresAuth:!0},component:function(){return t.e("chunk-9d822a0c").then(t.bind(null,"805a"))}},{path:"notification",name:"user.notification-setting",meta:{requiresAuth:!0},component:function(){return t.e("chunk-2d0b8ed2").then(t.bind(null,"3186"))}},{path:"bindings",name:"user.bindings",meta:{requiresAuth:!0},component:function(){return t.e("chunk-2d213022").then(t.bind(null,"ab9d"))}},{path:"avatar",name:"user.avatar",meta:{requiresAuth:!0},component:function(){return t.e("chunk-5da9ee8e").then(t.bind(null,"acb4"))}},{path:"blacklist",name:"user.blacklist",meta:{requiresAuth:!0},component:function(){return t.e("chunk-2d0de194").then(t.bind(null,"83cf"))}}]}],ue=t("081a"),re=t("52c1"),ae=function(e){var n=e.commit;return n("toggle")},oe=function(e){var n=e.toggled;return n},ie=function(e){return e.toggled=!e.toggled},he={toggled:!1},de=t("8e61"),se=t("84db"),fe=t.n(se),le={Auth:D},be=fe()(le),ke=be.reduce(function(e,n){return Object(de["a"])({},e,Object(A["a"])({},n,le[n].module))},{}),pe=be.reduce(function(e,n){return[].concat(Object(O["a"])(e),[le[n].plugin])},[]).filter(R["isFunction"]),me={modules:ke,plugins:pe};d["default"].use(re["a"]);var ge=new re["a"].Store({state:he,mutations:o,actions:r,modules:me.modules,plugins:me.plugins,getters:a,strict:!1}),ve=function(e){return!0===e.meta.requiresAuth},we=function(e,n,t){ge.dispatch("checkUserToken").then(function(){return ge.getters.isLogged&&e.path.indexOf("auth")>0?t({name:"home"}):t()}).catch(function(){if(ve(e))return t({name:"auth.login"});t()})},ye=we;d["default"].use(ue["a"]);var je={path:"/",component:function(){return t.e("chunk-3e7b966b").then(t.bind(null,"7fe4c"))},children:[].concat(Object(O["a"])(P),Object(O["a"])(V),Object(O["a"])(te),Object(O["a"])(ee),Object(O["a"])(Y),Object(O["a"])(ne),Object(O["a"])(ce))},Oe=[je],Pe=new ue["a"]({routes:Oe,linkActiveClass:"active",linkExactActiveClass:"active",mode:"history"});Pe.beforeEach(ye);var Te=Pe;d["default"].config.productionTip=!1,Object(s["sync"])(ge,Te),d["default"].prototype.$message=h["Message"],d["default"].prototype.$http=i["a"],d["default"].prototype.$user=function(){return ge.getters.currentUser},setTimeout(function(){new d["default"]({store:ge,router:Te,render:function(e){return e(j)}}).$mount("#app")},200)},d232:function(e,n,t){"use strict";var c=t("7f43"),u=t.n(c),r=t("84db"),a=t.n(r),o=t("a59e"),i=t.n(o),h=t("54fe"),d=function(e){e.interceptors.request.use(function(e){return e.withCredentials=!1,e},function(e){return i.a.reject(e)}),e.interceptors.response.use(function(e){return e.data},function(e){if(!e["response"])return i.a.reject(e);switch(e.response.status){case 422:var n=e.response.data.errors,t="";a()(n).map(function(e){var c=n[e];t=c[0]}),h["Message"].error(t);break;case 403:h["Message"].error(e.response.data.message||"您没有此操作权限！");break;case 401:"/auth/login"!==window.location.pathname&&(window.location.href="/auth/login");break;case 500:case 501:case 503:default:h["Message"].error("服务器出了点小问题，程序员小哥哥要被扣工资了~！")}return i.a.reject(e.response)})};t.d(n,"b",function(){return f});var s=u.a.create({baseURL:"http://api.lockhash.io",timeout:1e4});function f(e){s.defaults.headers.common.Authorization="Bearer ".concat(e)}d(s);n["a"]=s}});
//# sourceMappingURL=app.aa6a903c.js.map