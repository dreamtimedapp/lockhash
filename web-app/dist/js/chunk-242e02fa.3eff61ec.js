(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-242e02fa"],{"214f":function(e,t,s){"use strict";var r=s("32e9"),a=s("2aba"),i=s("79e5"),n=s("be13"),o=s("2b4c");e.exports=function(e,t,s){var u=o(e),c=s(n,u,""[e]),l=c[0],m=c[1];i(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(a(String.prototype,e,l),r(RegExp.prototype,u,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)}))}},4917:function(e,t,s){s("214f")("match",1,function(e,t,s){return[function(s){"use strict";var r=e(this),a=void 0==s?void 0:s[t];return void 0!==a?a.call(s,r):new RegExp(s)[t](String(r))},s]})},bd49:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row pt-3"},[s("div",{staticClass:"offset-sm-4 col-sm-4"},[s("div",{staticClass:"box"},[s("h4",{staticClass:"text-center font-weight-normal mt-2"},[e._v("用户注册")]),s("form",{on:{submit:function(t){return t.preventDefault(),e.showCaptcha(t)}}},[s("div",{staticClass:"form-group"},[s("label",[e._v("邮箱地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],ref:"emailInput",staticClass:"form-control",attrs:{type:"text",placeholder:"example@yike.io",required:""},domProps:{value:e.email},on:{blur:e.validateEmail,input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[e._v("用户名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"usernameInput",staticClass:"form-control",attrs:{type:"text",placeholder:"5 ~ 12 位字母或数字",required:""},domProps:{value:e.username},on:{blur:e.validateUsername,input:function(t){t.target.composing||(e.username=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[e._v("密码")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],ref:"passwordInput",staticClass:"form-control",attrs:{type:"password",placeholder:"6 ~ 32 位安全密码",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("button",{staticClass:"my-2 btn btn-primary w-100",attrs:{type:"submit",disabled:!e.formReady}},[e._v("注册")])])])]),s("div",{staticClass:"offset-sm-3 col-sm-6 text-center mt-2"},[s("p",[e._v("\n      已有账号？\n      "),s("router-link",{staticClass:"text-blue",attrs:{to:{name:"auth.login"}}},[e._v("快速登录")])],1)])])},a=[],i=(s("96cf"),s("3b8d")),n=s("cebc"),o=(s("4917"),s("2f62")),u=s("64b1"),c=s("d5df"),l=s("f5d1"),m=s("22f9"),p=s("4328"),h=s.n(p),d={name:"register",components:{GooglePlus:u["a"],FacebookIcon:c["a"],QqIcon:l["a"],GithubIcon:m["a"]},data:function(){return{username:"",email:"",password:"",ticket:null,randstr:null,error:!0,regex:{email:/^[a-zA-Z0-9-_.]+@[a-zA-Z0-9-.]+.(com|io|cc|co|li|it|sh|cn|net|org|jp|tw|me|info|us|in|la|pro|im|so|at|my)$/,username:/^[a-zA-Z]+[a-zA-Z0-9_-]+$/}}},watch:{username:function(){this.$refs["usernameInput"].classList.remove("is-invalid")},email:function(){this.$refs["emailInput"].classList.remove("is-invalid")}},computed:{formReady:function(){return!this.error&&this.email.match(this.regex.email)&&this.username.match(this.regex.username)&&this.username.length>=5&&this.username.length<=12&&this.password.length>=6&&this.password.length<=32}},methods:Object(n["a"])({},Object(o["b"])(["attemptRegister"]),{validateUsername:function(){var e=this;if(this.error=!1,!this.username.match(this.regex.username)||this.username.length<5)return this.error=!0,this.$refs["usernameInput"].classList.add("is-invalid"),this.$message.error("请输入 5 ~ 12 位正确格式用户名");this.$http.post("user/exists",h.a.stringify({username:this.username})).then(function(t){if(!t.success)return e.error=!0,e.$refs["usernameInput"].classList.add("is-invalid"),e.$message.error("用户名已经存在！")})},validateEmail:function(){var e=this;if(this.error=!1,!this.email.match(this.regex.email))return this.error=!0,this.$refs["emailInput"].classList.add("is-invalid"),this.$message.error("请输入正确的邮箱地址");this.$http.post("user/exists",h.a.stringify({email:this.email})).then(function(t){if(!t.success)return e.error=!0,e.$refs["emailInput"].classList.add("is-invalid"),e.$message.error("邮箱已经存在！")})},showCaptcha:function(){var e=this,t=new window.TencentCaptcha("2024993958",function(t){if(0!==t.ret)return e.$message.error("请先完成验证！");e.ticket=t.ticket,e.randstr=t.randstr,e.submit()});t.show()},submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.ticket){e.next=2;break}return e.abrupt("return",this.$message.error("请先完成验证！"));case 2:return e.prev=2,e.next=5,this.attemptRegister(this.$data);case 5:this.$message.warning("注册成功，请先验证你邮箱地址！"),this.$router.push({name:"home"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),422!==e.t0.status&&this.$message.error("注册失败！");case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(){return e.apply(this,arguments)}return t}()})},f=d,v=s("2877"),g=Object(v["a"])(f,r,a,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-242e02fa.3eff61ec.js.map