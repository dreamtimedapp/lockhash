{"version":3,"sources":["webpack:///./src/modules/threads/form.vue?a970","webpack:///./src/modules/threads/form.vue?fb91","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/Alert.vue?5a95","webpack:///node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/Alert.vue","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/Alert.vue?8838","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/Alert.vue","webpack:///src/modules/threads/form.vue","webpack:///./src/modules/threads/form.vue?0bdb","webpack:///./src/modules/threads/form.vue","webpack:///./src/components/user-locked.vue?79ad","webpack:///src/components/user-locked.vue","webpack:///./src/components/user-locked.vue?26c0","webpack:///./src/components/user-locked.vue","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/AccountOff.vue?0f5f","webpack:///node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/AccountOff.vue","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/AccountOff.vue?afec","webpack:///./node_modules/_vue-material-design-icons@3.1.0@vue-material-design-icons/AccountOff.vue"],"names":["_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_form_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_0_5_0_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_1_0_1_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_15_7_0_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_3_0_0_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_2_0_1_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_15_7_0_vue_loader_lib_index_js_vue_loader_options_form_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","currentUser","$user","has_activated","_v","directives","name","rawName","value","form","expression","ref","attrs","type","placeholder","domProps","on","input","$event","target","composing","$set","toolbar","options","maxLines","Infinity","model","content","callback","$$v","filterable","_l","item","key","id","label","title","disabled","formReady","click","showCaptcha","submit","_e","staticRenderFns","Alertvue_type_template_id_49eea703_render","aria-hidden","decorative","aria-label","role","$emit","fill","fillColor","width","size","height","viewBox","d","_s","Alertvue_type_template_id_49eea703_staticRenderFns","Alertvue_type_script_lang_js_","props","String","default","Boolean","Number","_vue_material_design_icons_3_1_0_vue_material_design_icons_Alertvue_type_script_lang_js_","component","Object","componentNormalizer","Alert","formvue_type_script_lang_js_","components","Editor","editor","ElSelect","element_ui_common","ElOption","UserLocked","user_locked","data","ready","nodes","busing","node_id","is_draft","markdown","body","ticket","randstr","watch","deep","handler","localforage_default","a","setItem","computed","objectSpread","vuex_esm","length","mounted","_this","loadNodes","$route","loadThread","params","then","syncFromCache","$nextTick","$refs","focus","methods","_this2","getItem","err","esm_typeof","assign_default","clearCache","removeItem","_this3","$http","get","response","finally","_this4","concat","thread","draft","_this5","captcha","TencentCaptcha","res","ret","$message","error","show","_this6","arguments","undefined","promise","isEdit","patch","post","success","$router","replace","threads_formvue_type_script_lang_js_","form_component","__webpack_exports__","user_lockedvue_type_script_lang_js_","AccountOffIcon","AccountOff","components_user_lockedvue_type_script_lang_js_","AccountOffvue_type_script_lang_js_","_vue_material_design_icons_3_1_0_vue_material_design_icons_AccountOffvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-641b5dc0.f5ab3aa5.js","sourcesContent":["import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.5.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.ready)?_c('div',{staticClass:\"page-threads-show\"},[(_vm.currentUser.has_banned)?_c('div',[_c('user-locked')],1):(_vm.$user() && !_vm.$user().has_activated)?_c('div',[_c('div',{staticClass:\"box-body py-4 text-center\"},[_c('h1',{staticClass:\"display-4 text-gray-40\"},[_c('alert')],1),_vm._v(\"\\n      您需要先激活账户以使用此功能\\n    \")])]):_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-9 m-auto\"},[_c('div',{staticClass:\"box box-flush\"},[_c('form',[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header pt-3 border-bottom-0\"},[_c('div',{staticClass:\"input-group input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.title),expression:\"form.title\"}],ref:\"title_input\",staticClass:\"form-control form-control-lg\",attrs:{\"type\":\"text\",\"placeholder\":\"请在这里输入标题（请精准表达）\"},domProps:{\"value\":(_vm.form.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"title\", $event.target.value)}}})])]),_c('editor',{attrs:{\"toolbar\":false,\"options\":{maxLines: Infinity},\"placeholder\":\"请使用 Markdown 格式详细并精准的表达，不得少于30个字符~\"},model:{value:(_vm.form.content.markdown),callback:function ($$v) {_vm.$set(_vm.form.content, \"markdown\", $$v)},expression:\"form.content.markdown\"}}),_c('div',{staticClass:\"card-footer border-top p-2 d-flex justify-content-between\"},[_c('div',{staticClass:\"left-actions d-flex align-items-center\"},[_c('span',{staticClass:\"text-muted\"},[_vm._v(\"发布到\")]),_c('div',{staticClass:\"dropdown ml-1\"},[_c('el-select',{attrs:{\"filterable\":\"\"},model:{value:(_vm.form.node_id),callback:function ($$v) {_vm.$set(_vm.form, \"node_id\", $$v)},expression:\"form.node_id\"}},_vm._l((_vm.nodes),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id,\"label\":item.title}})}),1)],1)]),_c('div',{staticClass:\"right-actions\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":!_vm.formReady},on:{\"click\":function($event){return _vm.showCaptcha(false)}}},[_vm._v(\"立即发布\")]),_c('button',{staticClass:\"btn btn-secondary ml-1\",attrs:{\"type\":\"button\",\"disabled\":!_vm.formReady},on:{\"click\":function($event){return _vm.submit(true)}}},[_vm._v(\"保存为草稿\")])])])],1)])])])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"material-design-icon alert-icon\",attrs:{\"aria-hidden\":_vm.decorative,\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z\"}},[_c('title',[_vm._v(_vm._s(_vm.title))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span :aria-hidden=\"decorative\"\n        :aria-label=\"title\"\n        class=\"material-design-icon alert-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z\">\n        <title>{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AlertIcon\",\n  props: {\n    title: {\n      type: String,\n      default: \"Alert icon\"\n    },\n    decorative: {\n      type: Boolean,\n      default: false\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>\n","import mod from \"-!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../_thread-loader@2.1.2@thread-loader/dist/cjs.js!../_babel-loader@8.0.5@babel-loader/lib/index.js!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../_thread-loader@2.1.2@thread-loader/dist/cjs.js!../_babel-loader@8.0.5@babel-loader/lib/index.js!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./Alert.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Alert.vue?vue&type=template&id=49eea703&\"\nimport script from \"./Alert.vue?vue&type=script&lang=js&\"\nexport * from \"./Alert.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"page-threads-show\" v-if=\"ready\">\n    <div v-if=\"currentUser.has_banned\">\n      <user-locked />\n    </div>\n    <div v-else-if=\"$user() && !$user().has_activated\">\n      <div class=\"box-body py-4 text-center\">\n        <h1 class=\"display-4 text-gray-40\">\n          <alert />\n        </h1>\n        您需要先激活账户以使用此功能\n      </div>\n    </div>\n    <div class=\"row\" v-else>\n      <div class=\"col-md-9 m-auto\">\n        <div class=\"box box-flush\">\n          <form>\n            <div class=\"card\">\n              <div class=\"card-header pt-3 border-bottom-0\">\n                <div class=\"input-group input-group\">\n                  <input type=\"text\" ref=\"title_input\" class=\"form-control form-control-lg\" v-model=\"form.title\" placeholder=\"请在这里输入标题（请精准表达）\">\n                </div>\n              </div>\n              <editor v-model=\"form.content.markdown\" :toolbar=\"false\" :options=\"{maxLines: Infinity}\" placeholder=\"请使用 Markdown 格式详细并精准的表达，不得少于30个字符~\"></editor>\n              <div class=\"card-footer border-top p-2 d-flex justify-content-between\">\n                <div class=\"left-actions d-flex align-items-center\">\n                  <span class=\"text-muted\">发布到</span>\n                  <div class=\"dropdown ml-1\">\n                    <el-select filterable v-model=\"form.node_id\">\n                      <el-option v-for=\"item in nodes\" :key=\"item.id\" :value=\"item.id\" :label=\"item.title\"></el-option>\n                    </el-select>\n                  </div>\n                </div>\n                <div class=\"right-actions\">\n                  <button type=\"button\" class=\"btn btn-primary\" :disabled=\"!formReady\" @click=\"showCaptcha(false)\">立即发布</button>\n                  <button type=\"button\" class=\"btn btn-secondary ml-1\" :disabled=\"!formReady\" @click=\"submit(true)\">保存为草稿</button>\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport Editor from '$components/editor'\nimport UserLocked from '$components/user-locked'\nimport localforage from 'localforage'\nimport Alert from '$icons/Alert'\nimport { Select as ElSelect, Option as ElOption } from 'element-ui'\nimport 'element-ui/lib/theme-chalk/select.css'\n\nexport default {\n  name: 'thread-form',\n  components: {\n    Editor,\n    Alert,\n    ElSelect,\n    ElOption,\n    UserLocked\n  },\n  data () {\n    return {\n      ready: false,\n      nodes: [],\n      busing: false,\n      form: {\n        node_id: null,\n        type: 'markdown',\n        is_draft: true,\n        title: '',\n        content: {\n          markdown: '',\n          body: ''\n        },\n        ticket: null,\n        randstr: null\n      }\n    }\n  },\n  watch: {\n    form: {\n      deep: true,\n      handler () {\n        localforage.setItem('thread.form', this.form)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser']),\n    formReady () {\n      return (\n        !this.busing &&\n        this.form.title.length >= 5 &&\n        this.form.node_id > 0 &&\n        this.form.content.markdown &&\n        this.form.content.markdown.length >= 30\n      )\n    }\n  },\n  mounted () {\n    this.loadNodes()\n    if (this.$route.name == 'threads.edit') {\n      this.loadThread(this.$route.params.id)\n        .then(this.syncFromCache)\n        .then(() => {\n          this.ready = true\n        })\n    } else {\n      this.syncFromCache()\n      this.ready = true\n    }\n    this.$nextTick(() => {\n      this.$refs['title_input'].focus()\n    })\n  },\n  methods: {\n    syncFromCache () {\n      localforage.getItem('thread.form', (err, form) => {\n        if (!err && typeof form === 'object') {\n          this.form = Object.assign(this.form, form)\n        }\n      })\n    },\n    clearCache () {\n      localforage.removeItem('thread.form')\n    },\n    loadNodes () {\n      this.busing = true\n      return this.$http\n        .get('nodes')\n        .then(response => {\n          this.nodes = response.data\n          this.busing = false\n        })\n        .finally(() => (this.busing = false))\n    },\n    loadThread (id) {\n      return this.$http\n        .get(`threads/${id}`)\n        .then(thread => (this.form = Object.assign(this.form, thread)))\n    },\n    showCaptcha (draft) {\n      let captcha = new TencentCaptcha(\n        process.env.VUE_APP_CAPTCHA_ID_PUBLISH,\n        res => {\n          if (res.ret === 0) {\n            this.form.ticket = res.ticket\n            this.form.randstr = res.randstr\n            this.submit(draft)\n          } else {\n            return this.$message.error('请先完成验证！')\n          }\n        }\n      )\n      captcha.show()\n    },\n    submit (draft = true) {\n      if (!this.form.ticket) {\n        return this.$message.error('请先完成验证！')\n      }\n      this.form.is_draft = draft\n      this.busing = true\n      let promise = null\n      let isEdit = this.$route.name == 'threads.edit'\n\n      if (isEdit) {\n        promise = this.$http\n          .patch(`threads/${this.$route.params.id}`)\n          .patch(this.form)\n      } else {\n        promise = this.$http.post('threads', this.form)\n      }\n\n      promise\n        .then(response => {\n          this.$message.success(\n            '内容已' + (draft ? '保存为草稿' : isEdit ? '更新' : '发布')\n          )\n          this.$router.replace({\n            name: 'threads.show',\n            params: { id: response.id }\n          })\n          this.clearCache()\n        })\n        .finally(() => (this.busing = false))\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.editor-container {\n  overflow: auto;\n  height: calc(100vh - 370px);\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=1d40e65a&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\nimport style0 from \"./form.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box text-center text-danger\"},[_c('h1',[_c('account-off-icon')],1),_vm._v(\" 该账户已被冻结\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"box text-center text-danger\">\n    <h1>\n      <account-off-icon />\n    </h1> 该账户已被冻结\n  </div>\n</template>\n\n<script>\nimport AccountOffIcon from '$icons/AccountOff'\nexport default {\n  name: 'user-locked',\n  components: { AccountOffIcon }\n}\n</script>\n","import mod from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./user-locked.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.2@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.0.5@babel-loader/lib/index.js!../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./user-locked.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./user-locked.vue?vue&type=template&id=628ce6c6&\"\nimport script from \"./user-locked.vue?vue&type=script&lang=js&\"\nexport * from \"./user-locked.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"material-design-icon account-off-icon\",attrs:{\"aria-hidden\":_vm.decorative,\"aria-label\":_vm.title,\"role\":\"img\"},on:{\"click\":function($event){return _vm.$emit('click', $event)}}},[_c('svg',{staticClass:\"material-design-icon__svg\",attrs:{\"fill\":_vm.fillColor,\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M12,4C14.21,4 16,5.79 16,8C16,9.95 14.6,11.58 12.75,11.93L8.07,7.25C8.42,5.4 10.05,4 12,4M12.28,14L18.28,20L20,21.72L18.73,23L15.73,20H4V18C4,16.16 6.5,14.61 9.87,14.14L2.78,7.05L4.05,5.78L12.28,14M20,18V19.18L15.14,14.32C18,14.93 20,16.35 20,18Z\"}},[_c('title',[_vm._v(_vm._s(_vm.title))])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span :aria-hidden=\"decorative\"\n        :aria-label=\"title\"\n        class=\"material-design-icon account-off-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M12,4C14.21,4 16,5.79 16,8C16,9.95 14.6,11.58 12.75,11.93L8.07,7.25C8.42,5.4 10.05,4 12,4M12.28,14L18.28,20L20,21.72L18.73,23L15.73,20H4V18C4,16.16 6.5,14.61 9.87,14.14L2.78,7.05L4.05,5.78L12.28,14M20,18V19.18L15.14,14.32C18,14.93 20,16.35 20,18Z\">\n        <title>{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"AccountOffIcon\",\n  props: {\n    title: {\n      type: String,\n      default: \"Account Off icon\"\n    },\n    decorative: {\n      type: Boolean,\n      default: false\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>\n","import mod from \"-!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../_thread-loader@2.1.2@thread-loader/dist/cjs.js!../_babel-loader@8.0.5@babel-loader/lib/index.js!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./AccountOff.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../_thread-loader@2.1.2@thread-loader/dist/cjs.js!../_babel-loader@8.0.5@babel-loader/lib/index.js!../_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../_vue-loader@15.7.0@vue-loader/lib/index.js??vue-loader-options!./AccountOff.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountOff.vue?vue&type=template&id=cd66352e&\"\nimport script from \"./AccountOff.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountOff.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../_vue-loader@15.7.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}