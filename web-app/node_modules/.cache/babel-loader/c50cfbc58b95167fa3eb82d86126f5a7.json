{"remainingRequest":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js!/root/lockhash/web-app/node_modules/babel-loader/lib/index.js!/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/lockhash/web-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/lockhash/web-app/src/modules/nodes/show.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/lockhash/web-app/src/modules/nodes/show.vue","mtime":1553930101455},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport HotTags from '$components/hot-tags';\nimport ThreadsList from '$components/threads-list';\nimport SubscribeBtn from '$components/buttons/subscribe-btn';\nexport default {\n  components: {\n    SubscribeBtn: SubscribeBtn,\n    HotTags: HotTags,\n    ThreadsList: ThreadsList\n  },\n  data: function data() {\n    return {\n      node: {},\n      threads: {\n        default: {},\n        featured: {},\n        zeroComment: {},\n        recent: {}\n      },\n      currentThreadsTab: 'default'\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['currentUser'])),\n  beforeRouteUpdate: function beforeRouteUpdate(to, from, next) {\n    if (to.params.id != from.params.id) {\n      this.getNode(to.params.id);\n      this.loadThreads(to.params.id);\n    }\n\n    next();\n  },\n  created: function created() {\n    this.getNode(this.$route.params.id);\n    this.loadThreads(this.$route.params.id);\n  },\n  watch: {\n    currentThreadsTab: function currentThreadsTab() {\n      this.loadThreads(this.$route.params.id, 1);\n    }\n  },\n  methods: {\n    loadThreads: function loadThreads(id) {\n      var _this = this;\n\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      this.$http.get(\"nodes/\".concat(id, \"/threads?all=yes&page=\").concat(page)).then(function (threads) {\n        return _this.threads[_this.currentThreadsTab] = threads;\n      });\n    },\n    handlePageChanged: function handlePageChanged(page) {\n      this.loadThreads(page);\n    },\n    getNode: function getNode(id) {\n      var _this2 = this;\n\n      this.$http.get(\"nodes/\".concat(id)).then(function (data) {\n        _this2.node = data;\n      });\n    }\n  }\n};",{"version":3,"sources":["show.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,WAAA,MAAA,0BAAA;AACA,OAAA,YAAA,MAAA,mCAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,YAAA,EAAA,YAAA;AAAA,IAAA,OAAA,EAAA,OAAA;AAAA,IAAA,WAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,WAAA,EAAA,EAHA;AAIA,QAAA,MAAA,EAAA;AAJA,OAFA;AAQA,MAAA,iBAAA,EAAA;AARA,KAAA;AAUA,GAbA;AAcA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,CAAA,CADA,CAdA;AAiBA,EAAA,iBAjBA,6BAiBA,EAjBA,EAiBA,IAjBA,EAiBA,IAjBA,EAiBA;AACA,QAAA,EAAA,CAAA,MAAA,CAAA,EAAA,IAAA,IAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,MAAA,CAAA,EAAA;AACA,WAAA,WAAA,CAAA,EAAA,CAAA,MAAA,CAAA,EAAA;AACA;;AAEA,IAAA,IAAA;AACA,GAxBA;AAyBA,EAAA,OAzBA,qBAyBA;AACA,SAAA,OAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,WAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,GA5BA;AA6BA,EAAA,KAAA,EAAA;AACA,IAAA,iBADA,+BACA;AACA,WAAA,WAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,CAAA;AACA;AAHA,GA7BA;AAkCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,EADA,EACA;AAAA;;AAAA,UAAA,IAAA,uEAAA,CAAA;AACA,WAAA,KAAA,CACA,GADA,iBACA,EADA,mCACA,IADA,GAEA,IAFA,CAEA,UAAA,OAAA;AAAA,eAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,iBAAA,IAAA,OAAA;AAAA,OAFA;AAGA,KALA;AAMA,IAAA,iBANA,6BAMA,IANA,EAMA;AACA,WAAA,WAAA,CAAA,IAAA;AACA,KARA;AASA,IAAA,OATA,mBASA,EATA,EASA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,iBAAA,EAAA,GAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,IAAA;AACA,OAFA;AAGA;AAbA;AAlCA,CAAA","sourcesContent":["<template>\n  <div class=\"page-node-show\">\n    <header class=\"page-header bg-grey-blue py-3 text-white\">\n      <div class=\"container\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-md-6\">\n            <h1>{{ node.title }}</h1>\n            <p>{{ node.description }}</p>\n          </div>\n          <div class=\"col-md-6 d-flex justify-content-end\">\n            <subscribe-btn relation=\"node\" :item=\"node\" />\n          </div>\n        </div>\n      </div>\n    </header>\n    <div class=\"container\">\n      <div class=\"row mt-3\">\n        <div class=\"col-md-9\">\n          <div class=\"box box-flush\">\n            <div class=\"box-body\">\n              <ul class=\"nav nav-pills\">\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" :class=\"{active: currentThreadsTab == 'default'}\" href=\"javascript:;\" @click=\"currentThreadsTab = 'default'\">活跃</a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" :class=\"{active: currentThreadsTab == 'featured'}\" href=\"javascript:;\" @click=\"currentThreadsTab = 'featured'\">精选</a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" :class=\"{active: currentThreadsTab == 'zeroComment'}\" href=\"javascript:;\" @click=\"currentThreadsTab = 'zeroComment'\">零回复</a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" :class=\"{active: currentThreadsTab == 'recent'}\" href=\"javascript:;\" @click=\"currentThreadsTab = 'recent'\">最新发布</a>\n                </li>\n              </ul>\n            </div>\n\n            <threads-list :threads=\"threads[currentThreadsTab]\" @page-changed=\"handlePageChanged\"></threads-list>\n          </div>\n        </div>\n        <div class=\"col-md-3\">\n          <hot-tags></hot-tags>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport HotTags from '$components/hot-tags'\nimport ThreadsList from '$components/threads-list'\nimport SubscribeBtn from '$components/buttons/subscribe-btn'\n\nexport default {\n  components: { SubscribeBtn, HotTags, ThreadsList },\n  data () {\n    return {\n      node: {},\n      threads: {\n        default: {},\n        featured: {},\n        zeroComment: {},\n        recent: {}\n      },\n      currentThreadsTab: 'default'\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser'])\n  },\n  beforeRouteUpdate (to, from, next) {\n    if (to.params.id != from.params.id) {\n      this.getNode(to.params.id)\n      this.loadThreads(to.params.id)\n    }\n\n    next()\n  },\n  created () {\n    this.getNode(this.$route.params.id)\n    this.loadThreads(this.$route.params.id)\n  },\n  watch: {\n    currentThreadsTab () {\n      this.loadThreads(this.$route.params.id, 1)\n    }\n  },\n  methods: {\n    loadThreads (id, page = 1) {\n      this.$http\n        .get(`nodes/${id}/threads?all=yes&page=${page}`)\n        .then(threads => (this.threads[this.currentThreadsTab] = threads))\n    },\n    handlePageChanged (page) {\n      this.loadThreads(page)\n    },\n    getNode (id) {\n      this.$http.get(`nodes/${id}`).then(data => {\n        this.node = data\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/modules/nodes"}]}