{"remainingRequest":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js!/root/lockhash/web-app/node_modules/babel-loader/lib/index.js!/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/lockhash/web-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/lockhash/web-app/src/components/buttons/animate-action.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/lockhash/web-app/src/components/buttons/animate-action.vue","mtime":1553930101451},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport mojs from 'mo-js';\nimport ThumbUpOutline from '$icons/ThumbUpOutline';\nimport ThumbUp from '$icons/ThumbUp';\nimport RelationBtn from './relation-btn';\nimport { mapGetters } from 'vuex';\nexport default {\n  components: {\n    RelationBtn: RelationBtn,\n    ThumbUp: ThumbUp,\n    ThumbUpOutline: ThumbUpOutline\n  },\n  props: {\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      likers: this.item.cache.likes_count,\n      animationTimeline: null\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['currentUser'])),\n  methods: {\n    toggle: function toggle() {\n      var _this = this;\n\n      if (!this.currentUser.id) {\n        return this.$router.push({\n          name: 'auth.login'\n        });\n      }\n\n      this.$http.post(\"relations/like\", {\n        followable_type: 'App\\\\Thread',\n        followable_id: this.item.id\n      }).then(function () {\n        _this.item.has_liked = !_this.item.has_liked;\n        _this.item.has_liked ? _this.$parent.thread.cache.likes_count++ : _this.$parent.thread.cache.likes_count--;\n      });\n    },\n    repeatClapping: function repeatClapping() {\n      var clapIcon = document.getElementById('clap--icon');\n      this.updateNumberOfClaps();\n      this.animationTimeline.replay();\n      clapIcon.classList.add('checked');\n    },\n    updateNumberOfClaps: function updateNumberOfClaps() {\n      var clapCount = document.getElementById('clap--count');\n      var clapTotalCount = document.getElementById('clap--count-total');\n      this.likers = this.$parent.thread.cache.likes_count;\n\n      if (this.item.has_liked) {\n        clapCount.innerHTML = '-1';\n        clapTotalCount.innerHTML = this.likers - 1;\n        this.likers--;\n      } else {\n        clapCount.innerHTML = '+1';\n        clapTotalCount.innerHTML = this.likers + 1;\n        this.likers++;\n      }\n    }\n  },\n  mounted: function mounted() {\n    var vm = this;\n    var clap = document.getElementById('clap');\n    var tlDuration = 300;\n    var clapHold;\n    var triangleBurst = new mojs.Burst({\n      parent: clap,\n      radius: {\n        50: 95\n      },\n      count: 5,\n      angle: 30,\n      children: {\n        shape: 'polygon',\n        radius: {\n          6: 0\n        },\n        scale: 1,\n        stroke: 'rgba(211,84,0 ,0.5)',\n        strokeWidth: 2,\n        angle: 210,\n        delay: 30,\n        speed: 0.2,\n        easing: mojs.easing.bezier(0.1, 1, 0.3, 1),\n        duration: tlDuration\n      }\n    });\n    var circleBurst = new mojs.Burst({\n      parent: clap,\n      radius: {\n        50: 75\n      },\n      angle: 25,\n      duration: tlDuration,\n      children: {\n        shape: 'circle',\n        fill: 'rgba(149,165,166 ,0.5)',\n        delay: 30,\n        speed: 0.2,\n        radius: {\n          3: 0\n        },\n        easing: mojs.easing.bezier(0.1, 1, 0.3, 1)\n      }\n    });\n    var countAnimation = new mojs.Html({\n      el: '#clap--count',\n      isShowStart: false,\n      isShowEnd: true,\n      y: {\n        0: -30\n      },\n      opacity: {\n        0: 1\n      },\n      duration: tlDuration\n    }).then({\n      opacity: {\n        1: 0\n      },\n      y: -80,\n      delay: tlDuration / 2\n    });\n    var countTotalAnimation = new mojs.Html({\n      el: '#clap--count-total',\n      isShowStart: false,\n      isShowEnd: true,\n      opacity: {\n        0: 1\n      },\n      delay: 3 * tlDuration / 2,\n      duration: tlDuration,\n      y: {\n        0: -3\n      }\n    });\n    var scaleButton = new mojs.Html({\n      el: '#clap',\n      duration: tlDuration,\n      scale: {\n        1.3: 1\n      },\n      easing: mojs.easing.out\n    });\n    clap.style.transform = 'scale(1, 1)';\n    /* Bug1 fix */\n\n    this.animationTimeline = new mojs.Timeline();\n    this.animationTimeline.add([triangleBurst, circleBurst, countAnimation, countTotalAnimation, scaleButton]);\n    clap.addEventListener('click', function () {\n      vm.repeatClapping();\n    });\n    clap.addEventListener('mousedown', function () {\n      clapHold = setInterval(function () {\n        vm.repeatClapping();\n      }, 400);\n    });\n    clap.addEventListener('mouseup', function () {\n      clearInterval(clapHold);\n    });\n  }\n};",{"version":3,"sources":["animate-action.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"clap\" class=\"text-center clap d-flex align-items-center justify-content-center\" @click=\"toggle\">\n    <span id=\"clap--icon\" class=\"clap--icon\">\n      <thumb-up-outline v-if=\"!item.has_liked\" />\n      <thumb-up v-else />\n    </span>\n    <span id=\"clap--count\" class=\"clap--count\"></span>\n    <span id=\"clap--count-total\" class=\"clap--count-total\"></span>\n  </div>\n</template>\n\n<script>\nimport mojs from 'mo-js'\nimport ThumbUpOutline from '$icons/ThumbUpOutline'\nimport ThumbUp from '$icons/ThumbUp'\nimport RelationBtn from './relation-btn'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  components: { RelationBtn, ThumbUp, ThumbUpOutline },\n  props: {\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      likers: this.item.cache.likes_count,\n      animationTimeline: null\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser'])\n  },\n  methods: {\n    toggle () {\n      if (!this.currentUser.id) {\n        return this.$router.push({ name: 'auth.login' })\n      }\n      this.$http\n        .post(`relations/like`, {\n          followable_type: 'App\\\\Thread',\n          followable_id: this.item.id\n        })\n        .then(() => {\n          this.item.has_liked = !this.item.has_liked\n\n          this.item.has_liked\n            ? this.$parent.thread.cache.likes_count++\n            : this.$parent.thread.cache.likes_count--\n        })\n    },\n    repeatClapping () {\n      const clapIcon = document.getElementById('clap--icon')\n\n      this.updateNumberOfClaps()\n      this.animationTimeline.replay()\n      clapIcon.classList.add('checked')\n    },\n    updateNumberOfClaps () {\n      const clapCount = document.getElementById('clap--count')\n      const clapTotalCount = document.getElementById('clap--count-total')\n      this.likers = this.$parent.thread.cache.likes_count\n\n      if (this.item.has_liked) {\n        clapCount.innerHTML = '-1'\n        clapTotalCount.innerHTML = this.likers - 1\n        this.likers--\n      } else {\n        clapCount.innerHTML = '+1'\n        clapTotalCount.innerHTML = this.likers + 1\n        this.likers++\n      }\n    }\n  },\n  mounted () {\n    const vm = this\n    const clap = document.getElementById('clap')\n    const tlDuration = 300\n    let clapHold\n\n    const triangleBurst = new mojs.Burst({\n      parent: clap,\n      radius: { 50: 95 },\n      count: 5,\n      angle: 30,\n      children: {\n        shape: 'polygon',\n        radius: { 6: 0 },\n        scale: 1,\n        stroke: 'rgba(211,84,0 ,0.5)',\n        strokeWidth: 2,\n        angle: 210,\n        delay: 30,\n        speed: 0.2,\n        easing: mojs.easing.bezier(0.1, 1, 0.3, 1),\n        duration: tlDuration\n      }\n    })\n    const circleBurst = new mojs.Burst({\n      parent: clap,\n      radius: { 50: 75 },\n      angle: 25,\n      duration: tlDuration,\n      children: {\n        shape: 'circle',\n        fill: 'rgba(149,165,166 ,0.5)',\n        delay: 30,\n        speed: 0.2,\n        radius: { 3: 0 },\n        easing: mojs.easing.bezier(0.1, 1, 0.3, 1)\n      }\n    })\n    const countAnimation = new mojs.Html({\n      el: '#clap--count',\n      isShowStart: false,\n      isShowEnd: true,\n      y: { 0: -30 },\n      opacity: { 0: 1 },\n      duration: tlDuration\n    }).then({\n      opacity: { 1: 0 },\n      y: -80,\n      delay: tlDuration / 2\n    })\n    const countTotalAnimation = new mojs.Html({\n      el: '#clap--count-total',\n      isShowStart: false,\n      isShowEnd: true,\n      opacity: { 0: 1 },\n      delay: (3 * tlDuration) / 2,\n      duration: tlDuration,\n      y: { 0: -3 }\n    })\n    const scaleButton = new mojs.Html({\n      el: '#clap',\n      duration: tlDuration,\n      scale: { 1.3: 1 },\n      easing: mojs.easing.out\n    })\n    clap.style.transform = 'scale(1, 1)' /* Bug1 fix */\n\n    this.animationTimeline = new mojs.Timeline()\n    this.animationTimeline.add([\n      triangleBurst,\n      circleBurst,\n      countAnimation,\n      countTotalAnimation,\n      scaleButton\n    ])\n\n    clap.addEventListener('click', function () {\n      vm.repeatClapping()\n    })\n\n    clap.addEventListener('mousedown', function () {\n      clapHold = setInterval(function () {\n        vm.repeatClapping()\n      }, 400)\n    })\n\n    clap.addEventListener('mouseup', function () {\n      clearInterval(clapHold)\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n/*========================\n    SASS definitions\n  =======================*/\n$btn-dimension: 60px;\n$primary-color: rgba(189, 195, 199, 1);\n$secondary-color: #0078ff;\n@mixin debug {\n  outline: 1px solid red;\n}\n\n/*========================\n      BUTTON styles\n    =======================*/\n.clap--icon {\n  color: $secondary-color;\n}\n.clap {\n  position: relative;\n  border-radius: 50%;\n  background: #fff;\n  font-size: 24px;\n  width: $btn-dimension;\n  height: $btn-dimension;\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: block;\n    border-radius: 50%;\n    //border: 1px solid $primary-color;\n    width: $btn-dimension - 1px;\n    height: $btn-dimension - 1px;\n  }\n  &:hover {\n    cursor: pointer;\n    background: #fff60;\n    font-size: 26px;\n    transition: all 0.3s ease-in;\n    &:after {\n      animation: shockwave 1s ease-in infinite;\n    }\n  }\n  .clap--count {\n    position: absolute;\n    top: -$btn-dimension/1.6;\n    left: $btn-dimension/4;\n    font-size: 0.8rem;\n    color: white;\n    background: $secondary-color;\n    border-radius: 50%;\n    height: $btn-dimension/2;\n    width: $btn-dimension/2;\n    line-height: $btn-dimension/2;\n  }\n  .clap--count-total {\n    position: absolute;\n    font-size: 0.8rem;\n    width: $btn-dimension;\n    text-align: center;\n    left: 0;\n    bottom: -$btn-dimension/2.5;\n    color: $primary-color;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/buttons"}]}