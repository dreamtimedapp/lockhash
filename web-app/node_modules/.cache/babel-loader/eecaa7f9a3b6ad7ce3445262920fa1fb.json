{"remainingRequest":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js!/root/lockhash/web-app/node_modules/babel-loader/lib/index.js!/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/lockhash/web-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/lockhash/web-app/src/components/nav-search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/lockhash/web-app/src/components/nav-search.vue","mtime":1553930101455},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'nav-search',\n  data: function data() {\n    return {\n      q: '',\n      threads: []\n    };\n  },\n  watch: {\n    q: function q() {\n      if (this.q.length > 0) {\n        this.search();\n      } else {\n        this.threads = [];\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      document.addEventListener('click', _this.onBodyClick);\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    document.removeEventListener('click', this.onBodyClick);\n  },\n  methods: {\n    onBodyClick: function onBodyClick(e) {\n      var searchForm = document.querySelector('.search-form');\n\n      if (e.target !== searchForm) {\n        this.threads = [];\n      }\n    },\n    highlightContent: function highlightContent(item) {\n      return (item.highlights['content'] || []).join('...');\n    },\n    search: function search() {\n      var _this2 = this;\n\n      this.$http.get(\"/threads/search?q=\" + this.q).then(function (response) {\n        _this2.threads = response.data;\n      });\n    }\n  }\n};",{"version":3,"sources":["nav-search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,CAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,CADA,eACA;AACA,UAAA,KAAA,CAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,MAAA;AACA,OAFA,MAEA;AACA,aAAA,OAAA,GAAA,EAAA;AACA;AACA;AAPA,GARA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,QAAA,CAAA,gBAAA,CAAA,OAAA,EAAA,KAAA,CAAA,WAAA;AACA,KAFA;AAGA,GArBA;AAsBA,EAAA,aAtBA,2BAsBA;AACA,IAAA,QAAA,CAAA,mBAAA,CAAA,OAAA,EAAA,KAAA,WAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,CADA,EACA;AACA,UAAA,UAAA,GAAA,QAAA,CAAA,aAAA,CAAA,cAAA,CAAA;;AACA,UAAA,CAAA,CAAA,MAAA,KAAA,UAAA,EAAA;AACA,aAAA,OAAA,GAAA,EAAA;AACA;AACA,KANA;AAOA,IAAA,gBAPA,4BAOA,IAPA,EAOA;AACA,aAAA,CAAA,IAAA,CAAA,UAAA,CAAA,SAAA,KAAA,EAAA,EAAA,IAAA,CAAA,KAAA,CAAA;AACA,KATA;AAUA,IAAA,MAVA,oBAUA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,uBAAA,KAAA,CAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAFA;AAGA;AAdA;AAzBA,CAAA","sourcesContent":["<template>\n  <form class=\"search-form form-inline my-2 my-lg-0\">\n    <input class=\"form-control mr-sm-2\" type=\"search\" v-model=\"q\" placeholder=\"搜索讨论\" aria-label=\"Search\">\n    <div class=\"list-group\" v-if=\"threads.length > 0\">\n      <div class=\"list-group-item list-group-item-action cursor-pointer\" v-for=\"item of threads\" :key=\"item.id\" @click=\"$router.push({name: 'threads.show', params:{id: item.id}})\">\n        <div class=\"d-flex align-items-center\">\n          <a href=\"#\" class=\"mr-2\"><img :src=\"item.user.avatar\" alt=\"\" class=\"avatar-30\"></a>\n          <div class=\"highlights text-gray-50 text-truncate\" v-html=\"item['highlights'] && item['highlights']['title'] ? item.highlights.title[0] : item.title\"></div>\n        </div>\n        <p class=\"highlights mt-1 text-gray-60\" v-if=\"item.highlights['content']\" v-html=\"highlightContent(item)\"></p>\n      </div>\n    </div>\n  </form>\n</template>\n\n<script>\nexport default {\n  name: 'nav-search',\n  data () {\n    return {\n      q: '',\n      threads: []\n    }\n  },\n  watch: {\n    q () {\n      if (this.q.length > 0) {\n        this.search()\n      } else {\n        this.threads = []\n      }\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      document.addEventListener('click', this.onBodyClick)\n    })\n  },\n  beforeDestroy () {\n    document.removeEventListener('click', this.onBodyClick)\n  },\n  methods: {\n    onBodyClick (e) {\n      let searchForm = document.querySelector('.search-form')\n      if (e.target !== searchForm) {\n        this.threads = []\n      }\n    },\n    highlightContent (item) {\n      return (item.highlights['content'] || []).join('...')\n    },\n    search () {\n      this.$http.get(`/threads/search?q=` + this.q).then(response => {\n        this.threads = response.data\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.search-form {\n  position: relative;\n  .list-group {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    min-width: 400px;\n    max-height: 80vh;\n    overflow-y: auto;\n    box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.1);\n    z-index: 99;\n  }\n}\n</style>\n"],"sourceRoot":"src/components"}]}