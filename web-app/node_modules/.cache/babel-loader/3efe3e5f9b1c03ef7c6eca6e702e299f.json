{"remainingRequest":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js!/root/lockhash/web-app/node_modules/babel-loader/lib/index.js!/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/root/lockhash/web-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/root/lockhash/web-app/src/modules/users/profile/account.vue?vue&type=script&lang=js&","dependencies":[{"path":"/root/lockhash/web-app/src/modules/users/profile/account.vue","mtime":1553930101455},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      oldPassword: '',\n      password: '',\n      passwordConfirmation: '',\n      email: '',\n      phone: ''\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['currentUser'])),\n  mounted: function mounted() {\n    if (this.$route.hash) {\n      var hash = this.$route.hash;\n      this.goAnchor(hash.slice(1));\n    }\n  },\n  methods: {\n    updateEmail: function () {\n      var _updateEmail = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$http.post('user/mail', {\n                  email: this.email\n                });\n\n              case 2:\n                result = _context.sent;\n                this.$message.warning(result.message);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function updateEmail() {\n        return _updateEmail.apply(this, arguments);\n      }\n\n      return updateEmail;\n    }(),\n    resetPassword: function resetPassword() {\n      this.$http.post('user/reset-password', {\n        old_password: this.oldPassword,\n        password: this.password,\n        password_confirmation: this.passwordConfirmation\n      });\n      this.oldPassword = '';\n      this.password = '';\n      this.passwordConfirmation = '';\n    },\n    goAnchor: function goAnchor(name) {\n      var element = document.getElementById(name);\n\n      if (element) {\n        element.scrollIntoView();\n      }\n    }\n  }\n};",{"version":3,"sources":["account.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA,SAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,oBAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,CAAA,CADA,CAVA;AAaA,EAAA,OAbA,qBAaA;AACA,QAAA,KAAA,MAAA,CAAA,IAAA,EAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,IAAA;AAEA,WAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA;AACA,GAnBA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,KAAA,CAAA,IAAA,CAAA,WAAA,EAAA;AACA,kBAAA,KAAA,EAAA,KAAA;AADA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,MAFA;AAMA,qBAAA,QAAA,CAAA,OAAA,CAAA,MAAA,CAAA,OAAA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAQA,IAAA,aARA,2BAQA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,qBAAA,EAAA;AACA,QAAA,YAAA,EAAA,KAAA,WADA;AAEA,QAAA,QAAA,EAAA,KAAA,QAFA;AAGA,QAAA,qBAAA,EAAA,KAAA;AAHA,OAAA;AAMA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,oBAAA,GAAA,EAAA;AACA,KAlBA;AAmBA,IAAA,QAnBA,oBAmBA,IAnBA,EAmBA;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,cAAA,CAAA,IAAA,CAAA;;AAEA,UAAA,OAAA,EAAA;AACA,QAAA,OAAA,CAAA,cAAA;AACA;AACA;AAzBA;AApBA,CAAA","sourcesContent":["<template>\n  <div class=\"boxes\">\n    <div class=\"box\" id=\"edit-password\">\n      <div class=\"box-heading border-bottom\">\n        <h5>修改密码</h5>\n      </div>\n      <form class=\"w-50\" @submit.prevent=\"resetPassword\">\n        <div class=\"form-group\">\n          <label>旧密码</label>\n          <input type=\"password\" v-model=\"oldPassword\" class=\"form-control\">\n        </div>\n        <div class=\"form-group\">\n          <label>新密码</label>\n          <input type=\"password\" v-model=\"password\" class=\"form-control\">\n        </div>\n        <div class=\"form-group\">\n          <label>确认新密码</label>\n          <input type=\"password\" v-model=\"passwordConfirmation\" class=\"form-control\">\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary rounded\">修改密码</button>\n        <router-link :to=\"{name: 'auth.forget-password'}\" class=\"text-blue ml-2\">忘记密码？</router-link>\n      </form>\n    </div>\n    <div class=\"box\" id=\"edit-email\">\n      <div class=\"box-heading border-bottom\">\n        <h5>修改邮箱地址</h5>\n      </div>\n      <form class=\"w-50\" @submit.prevent=\"updateEmail\">\n        <div class=\"form-group\">\n          <label>原邮箱</label>\n          <input type=\"text\" disabled class=\"form-control\" :value=\"currentUser.email\">\n        </div>\n        <div class=\"form-group\">\n          <label>新邮箱</label>\n          <input type=\"text\" class=\"form-control\" v-model=\"email\">\n          <small class=\"form-text text-muted\">修改后需要进行新的邮箱验证。</small>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary rounded\">确定</button>\n      </form>\n    </div>\n    <div class=\"box\" id=\"edit-phone\" v-if=\"false\">\n      <div class=\"box-heading border-bottom\">\n        <h5>修改手机号码</h5>\n      </div>\n      <form class=\"w-50\">\n        <div class=\"form-group\" v-if=\"currentUser.phone\">\n          <label>原号码</label>\n          <input type=\"text\" disabled class=\"form-control\" :value=\"currentUser.phone\">\n        </div>\n        <div class=\"form-group\">\n          <label>新号码</label>\n          <div class=\"input-group\">\n            <input type=\"text\" class=\"form-control\" v-model=\"phone\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-primary rounded-right\">获取验证码</button>\n            </div>\n          </div>\n          <small class=\"form-text text-muted\">修改手机号码需要进行短信验证。</small>\n        </div>\n        <div class=\"form-group\">\n          <label>验证码</label>\n          <input type=\"text\" class=\"form-control\">\n        </div>\n        <button class=\"btn btn-primary rounded\">确定</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  data () {\n    return {\n      oldPassword: '',\n      password: '',\n      passwordConfirmation: '',\n      email: '',\n      phone: ''\n    }\n  },\n  computed: {\n    ...mapGetters(['currentUser'])\n  },\n  mounted () {\n    if (this.$route.hash) {\n      let hash = this.$route.hash\n\n      this.goAnchor(hash.slice(1))\n    }\n  },\n  methods: {\n    async updateEmail () {\n      let result = await this.$http.post('user/mail', {\n        email: this.email\n      })\n\n      this.$message.warning(result.message)\n    },\n    resetPassword () {\n      this.$http.post('user/reset-password', {\n        old_password: this.oldPassword,\n        password: this.password,\n        password_confirmation: this.passwordConfirmation\n      })\n\n      this.oldPassword = ''\n      this.password = ''\n      this.passwordConfirmation = ''\n    },\n    goAnchor (name) {\n      let element = document.getElementById(name)\n\n      if (element) {\n        element.scrollIntoView()\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/modules/users/profile"}]}