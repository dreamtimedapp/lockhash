{"remainingRequest":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js!/root/lockhash/web-app/node_modules/babel-loader/lib/index.js!/root/lockhash/web-app/node_modules/eslint-loader/index.js??ref--13-0!/root/lockhash/web-app/src/utils/http/interceptors.js","dependencies":[{"path":"/root/lockhash/web-app/src/utils/http/interceptors.js","mtime":1553930633241},{"path":"/root/lockhash/web-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/root/lockhash/web-app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Object$keys from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"/root/lockhash/web-app/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport { Message } from 'element-ui';\nexport default (function (http) {\n  // 请求拦截\n  http.interceptors.request.use(function (config) {\n    config.withCredentials = false; // 需要跨域打开此配置\n\n    return config;\n  }, function (error) {\n    return _Promise.reject(error);\n  }); // https://github.com/mzabriskie/axios#interceptors\n\n  http.interceptors.response.use(function (response) {\n    return response.data;\n  },\n  /**\n   * This is a central point to handle all\n   * error messages generated by HTTP\n   * requests\n   */\n  function (error) {\n    if (!error['response']) {\n      return _Promise.reject(error);\n    }\n\n    switch (error.response.status) {\n      case 422:\n        var data = error.response.data.errors;\n        var content = '';\n\n        _Object$keys(data).map(function (key) {\n          var value = data[key];\n          content = value[0];\n        });\n\n        Message.error(content);\n        break;\n\n      case 403:\n        Message.error(error.response.data.message || '您没有此操作权限！');\n        break;\n\n      case 401:\n        if (window.location.pathname !== '/auth/login') {\n          window.location.href = '/auth/login';\n        }\n\n        break;\n\n      case 500:\n      case 501:\n      case 503:\n      default:\n        Message.error('服务器出了点小问题，程序员小哥哥要被扣工资了~！');\n    }\n\n    return _Promise.reject(error.response);\n  });\n});",{"version":3,"sources":["/root/lockhash/web-app/src/utils/http/interceptors.js"],"names":["Message","http","interceptors","request","use","config","withCredentials","error","reject","response","data","status","errors","content","map","key","value","message","window","location","pathname","href"],"mappings":";;AAAA,SAASA,OAAT,QAAwB,YAAxB;AAEA,gBAAe,UAAAC,IAAI,EAAI;AACrB;AACAA,EAAAA,IAAI,CAACC,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CACE,UAAAC,MAAM,EAAI;AACRA,IAAAA,MAAM,CAACC,eAAP,GAAyB,KAAzB,CADQ,CACuB;;AAC/B,WAAOD,MAAP;AACD,GAJH,EAKE,UAAAE,KAAK,EAAI;AACP,WAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,GAPH,EAFqB,CAWrB;;AACAN,EAAAA,IAAI,CAACC,YAAL,CAAkBO,QAAlB,CAA2BL,GAA3B,CACE,UAAAK,QAAQ,EAAI;AACV,WAAOA,QAAQ,CAACC,IAAhB;AACD,GAHH;AAIE;;;;;AAKA,YAAAH,KAAK,EAAI;AACP,QAAI,CAACA,KAAK,CAAC,UAAD,CAAV,EAAwB;AACtB,aAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD;;AAED,YAAQA,KAAK,CAACE,QAAN,CAAeE,MAAvB;AACE,WAAK,GAAL;AACE,YAAID,IAAI,GAAGH,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBE,MAA/B;AACA,YAAIC,OAAO,GAAG,EAAd;;AAEA,qBAAYH,IAAZ,EAAkBI,GAAlB,CAAsB,UAAUC,GAAV,EAAe;AACnC,cAAIC,KAAK,GAAGN,IAAI,CAACK,GAAD,CAAhB;AAEAF,UAAAA,OAAO,GAAGG,KAAK,CAAC,CAAD,CAAf;AACD,SAJD;;AAMAhB,QAAAA,OAAO,CAACO,KAAR,CAAcM,OAAd;AACA;;AACF,WAAK,GAAL;AACEb,QAAAA,OAAO,CAACO,KAAR,CAAcA,KAAK,CAACE,QAAN,CAAeC,IAAf,CAAoBO,OAApB,IAA+B,WAA7C;AACA;;AACF,WAAK,GAAL;AACE,YAAIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,KAA6B,aAAjC,EAAgD;AAC9CF,UAAAA,MAAM,CAACC,QAAP,CAAgBE,IAAhB,GAAuB,aAAvB;AACD;;AACD;;AACF,WAAK,GAAL;AACA,WAAK,GAAL;AACA,WAAK,GAAL;AACA;AACErB,QAAAA,OAAO,CAACO,KAAR,CAAc,0BAAd;AAzBJ;;AA2BA,WAAO,SAAQC,MAAR,CAAeD,KAAK,CAACE,QAArB,CAAP;AACD,GA1CH;AA4CD,CAxDD","sourcesContent":["import { Message } from 'element-ui'\n\nexport default http => {\n  // 请求拦截\n  http.interceptors.request.use(\n    config => {\n      config.withCredentials = false // 需要跨域打开此配置\n      return config\n    },\n    error => {\n      return Promise.reject(error)\n    }\n  )\n  // https://github.com/mzabriskie/axios#interceptors\n  http.interceptors.response.use(\n    response => {\n      return response.data\n    },\n    /**\n     * This is a central point to handle all\n     * error messages generated by HTTP\n     * requests\n     */\n    error => {\n      if (!error['response']) {\n        return Promise.reject(error)\n      }\n\n      switch (error.response.status) {\n        case 422:\n          let data = error.response.data.errors\n          let content = ''\n\n          Object.keys(data).map(function (key) {\n            let value = data[key]\n\n            content = value[0]\n          })\n\n          Message.error(content)\n          break\n        case 403:\n          Message.error(error.response.data.message || '您没有此操作权限！')\n          break\n        case 401:\n          if (window.location.pathname !== '/auth/login') {\n            window.location.href = '/auth/login'\n          }\n          break\n        case 500:\n        case 501:\n        case 503:\n        default:\n          Message.error('服务器出了点小问题，程序员小哥哥要被扣工资了~！')\n      }\n      return Promise.reject(error.response)\n    }\n  )\n}\n"]}]}